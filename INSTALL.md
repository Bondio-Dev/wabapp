# üöÄ –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ WhatsApp ‚Üî amoCRM MVP

## 1Ô∏è‚É£ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –û–±–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É (Ubuntu/Debian)
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js 18+
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é
node --version  # –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 16+
npm --version
```

## 2Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd /opt

# –†–∞—Å–ø–∞–∫—É–π—Ç–µ –∞—Ä—Ö–∏–≤
unzip whatsapp-amo-mvp.zip
cd whatsapp-amo-mvp

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
cp .env.example .env
```

## 3Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env`:

```bash
nano .env
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:**
- `GUPSHUP_API_KEY` - API –∫–ª—é—á –∏–∑ Gupshup
- `GUPSHUP_APP_NAME` - –∏–º—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Gupshup  
- `AMO_SUBDOMAIN` - –ø–æ–¥–¥–æ–º–µ–Ω –≤–∞—à–µ–≥–æ amoCRM
- `AMO_CLIENT_ID` - ID –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ amoCRM
- `AMO_CLIENT_SECRET` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## 4Ô∏è‚É£ –ó–∞–ø—É—Å–∫

```bash
# –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
chmod +x start.sh
./start.sh

# –ò–ª–∏ –æ–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫
npm start

# –ò–ª–∏ —á–µ—Ä–µ–∑ PM2 –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
npm install -g pm2
npm run pm2
```

## 5Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Gupshup

1. –í–æ–π–¥–∏—Ç–µ –≤ [Gupshup](https://www.gupshup.io/whatsapp/dashboard)
2. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö webhook —É–∫–∞–∂–∏—Ç–µ: `http://83.166.238.230:3001/webhook/gupshup`
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## 6Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ amoCRM

1. –û—Ç–∫—Ä–æ–π—Ç–µ: `http://83.166.238.230:3001/api/amo/auth`
2. –ü—Ä–æ–π–¥–∏—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é OAuth
3. –¢–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–∏—Å–∞
curl http://83.166.238.230:3001/health

# –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
curl -X POST http://83.166.238.230:3001/api/send-message \
  -H "Content-Type: application/json" \
  -d '{"phone":"+79001234567","message":"–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"}'
```

## üõ† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# PM2 –∫–æ–º–∞–Ω–¥—ã
pm2 status                    # —Å—Ç–∞—Ç—É—Å
pm2 logs whatsapp-amo-mvp    # –ª–æ–≥–∏  
pm2 restart whatsapp-amo-mvp # –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 stop whatsapp-amo-mvp    # –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
```

**–ì–æ—Ç–æ–≤–æ!** üéâ –¢–µ–ø–µ—Ä—å WhatsApp –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å amoCRM.
